<Window x:Class="PowerScope.View.UserForms.MeasurementSelection"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:svgc="http://sharpvectors.codeplex.com/svgc/"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:local="clr-namespace:PowerScope.View.UserForms"
        mc:Ignorable="d"
        Title="Measurement Selection" Height="400" Width="400" 
        WindowStyle="None"
        AllowsTransparency="True"
        ResizeMode="NoResize" 
        WindowStartupLocation="CenterScreen"
        Background="Transparent"
        FontFamily="{DynamicResource {x:Static SystemFonts.MessageFontFamily}}"
        FontSize="{DynamicResource {x:Static SystemFonts.MessageFontSize}}">
    <Window.Resources>
        <!-- Dark theme styles using global resources and system fonts -->
        <Style TargetType="Label" BasedOn="{StaticResource LabelStyle}">
            <!-- Inherits system font settings from LabelStyle in App.xaml -->
        </Style>
        <Style TargetType="Button" BasedOn="{StaticResource ButtonStyle}">
            <Setter Property="BorderThickness" Value="1"/>
            <Setter Property="Padding" Value="5,5"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border Background="{TemplateBinding Background}" 
                                BorderBrush="{TemplateBinding BorderBrush}" 
                                BorderThickness="{TemplateBinding BorderThickness}">
                            <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter Property="Background" Value="{DynamicResource PlotSettings_ButtonHoverBrush}"/>
                            </Trigger>
                            <Trigger Property="IsPressed" Value="True">
                                <Setter Property="Background" Value="{DynamicResource PlotSettings_ButtonPressedBrush}"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>
        <!-- Custom measurement button style with larger size -->
        <Style x:Key="MeasurementButtonStyle" TargetType="Button" BasedOn="{StaticResource {x:Type Button}}">
            <Setter Property="Width" Value="80"/>
            <Setter Property="Height" Value="80"/>
            <Setter Property="Margin" Value="5"/>
            <Setter Property="Padding" Value="5"/>
            <Setter Property="BorderThickness" Value="2"/>
        </Style>
        <!-- Custom close button style -->
        <Style x:Key="CloseButtonStyle" TargetType="Button">
            <Setter Property="Background" Value="Transparent"/>
            <Setter Property="Foreground" Value="{DynamicResource PlotSettings_CloseButtonForegroundBrush}"/>
            <Setter Property="BorderThickness" Value="0"/>
            <Setter Property="FontSize" Value="16"/>
            <Setter Property="FontWeight" Value="Bold"/>
            <Setter Property="Width" Value="30"/>
            <Setter Property="Height" Value="30"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border Background="{TemplateBinding Background}" 
                                BorderThickness="{TemplateBinding BorderThickness}">
                            <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter Property="Background" Value="{DynamicResource PlotSettings_CloseButtonHoverBrush}"/>
                            </Trigger>
                            <Trigger Property="IsPressed" Value="True">
                                <Setter Property="Background" Value="{DynamicResource PlotSettings_CloseButtonPressedBrush}"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>
        <!-- Style for small text labels under icons -->
        <Style x:Key="SmallLabelStyle" TargetType="TextBlock">
            <Setter Property="FontFamily" Value="{DynamicResource {x:Static SystemFonts.MessageFontFamily}}"/>
            <Setter Property="FontSize" Value="11"/>
            <Setter Property="HorizontalAlignment" Value="Center"/>
            <Setter Property="Foreground" Value="{DynamicResource PlotSettings_LabelForegroundBrush}"/>
        </Style>
    </Window.Resources>
    
    <!-- Main container with border and drop shadow -->
    <Border Background="{DynamicResource PlotSettings_BackgroundBrush}" 
            BorderBrush="{DynamicResource PlotSettings_BorderBrush}" 
            BorderThickness="1"
            CornerRadius="5">
        <Border.Effect>
            <DropShadowEffect Color="{DynamicResource PlotSettings_ShadowColor}" BlurRadius="10" ShadowDepth="3" Opacity="0.5"/>
        </Border.Effect>
        <Grid Margin="0">
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="*"/>
                <RowDefinition Height="Auto"/>
            </Grid.RowDefinitions>
            
            <!-- Custom title bar -->
            <Grid Grid.Row="0" Background="{DynamicResource PlotSettings_TitleBarBrush}" MouseLeftButtonDown="TitleBar_MouseLeftButtonDown">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>
                <TextBlock Grid.Column="0" Text="Select Measurement Type" 
                           Foreground="{DynamicResource PlotSettings_LabelForegroundBrush}" 
                           FontWeight="SemiBold"
                           VerticalAlignment="Center" 
                           Margin="15,8"/>
                <!-- Close button -->
                <Button Grid.Column="1" 
                        Style="{StaticResource CloseButtonStyle}"
                        Content="✕" 
                        Click="CloseButton_Click"
                        ToolTip="Close"/>
            </Grid>

            <!-- Content Area - Grid of measurement buttons -->
            <ScrollViewer Grid.Row="1" VerticalScrollBarVisibility="Auto" Margin="20,10,20,20" Grid.RowSpan="2">
                <UniformGrid Columns="3" HorizontalAlignment="Center">
                    
                    <!-- Minimum Button -->
                    <Button x:Name="Button_Minimum" 
                            Style="{StaticResource MeasurementButtonStyle}"
                            Click="MeasurementButton_Click"
                            Tag="Minimum"
                            ToolTip="Minimum value in the data set">
                        <StackPanel Orientation="Vertical" HorizontalAlignment="Center">
                            <svgc:SvgViewbox Source="/Icons/min.svg" Width="48" Height="48" Margin="5"/>
                            <TextBlock Text="Minimum" Style="{StaticResource SmallLabelStyle}"/>
                        </StackPanel>
                    </Button>

                    <!-- Maximum Button -->
                    <Button x:Name="Button_Maximum" 
                            Style="{StaticResource MeasurementButtonStyle}"
                            Click="MeasurementButton_Click"
                            Tag="Maximum"
                            ToolTip="Maximum value in the data set">
                        <StackPanel Orientation="Vertical" HorizontalAlignment="Center">
                            <svgc:SvgViewbox Source="/Icons/max.svg" Width="48" Height="48" Margin="5"/>
                            <TextBlock Text="Maximum" Style="{StaticResource SmallLabelStyle}"/>
                        </StackPanel>
                    </Button>

                    <!-- Mean Button -->
                    <Button x:Name="Button_Mean" 
                            Style="{StaticResource MeasurementButtonStyle}"
                            Click="MeasurementButton_Click"
                            Tag="Mean"
                            ToolTip="Average (mean) value of the data set">
                        <StackPanel Orientation="Vertical" HorizontalAlignment="Center">
                            <svgc:SvgViewbox Source="/Icons/AVG.svg" Width="48" Height="48" Margin="5"/>
                            <TextBlock Text="Mean" Style="{StaticResource SmallLabelStyle}"/>
                        </StackPanel>
                    </Button>

                    <!-- RMS Button -->
                    <Button x:Name="Button_Rms" 
                            Style="{StaticResource MeasurementButtonStyle}"
                            Click="MeasurementButton_Click"
                            Tag="Rms"
                            ToolTip="Root Mean Square (RMS) value">
                        <StackPanel Orientation="Vertical" HorizontalAlignment="Center">
                            <svgc:SvgViewbox Source="/Icons/RMS.svg" Width="48" Height="48" Margin="5"/>
                            <TextBlock Text="RMS" Style="{StaticResource SmallLabelStyle}"/>
                        </StackPanel>
                    </Button>

                    <!-- Standard Deviation Button -->
                    <Button x:Name="Button_StandardDeviation" 
                            Style="{StaticResource MeasurementButtonStyle}"
                            Click="MeasurementButton_Click"
                            Tag="StandardDeviation"
                            ToolTip="Standard deviation of the data set">
                        <StackPanel Orientation="Vertical" HorizontalAlignment="Center">
                            <svgc:SvgViewbox Source="/Icons/StdDev.svg" Width="48" Height="48" Margin="5"/>
                            <TextBlock Text="Std Dev" Style="{StaticResource SmallLabelStyle}"/>
                        </StackPanel>
                    </Button>

                    <!-- Variance Button -->
                    <Button x:Name="Button_Variance" 
                            Style="{StaticResource MeasurementButtonStyle}"
                            Click="MeasurementButton_Click"
                            Tag="Variance"
                            ToolTip="Variance of the data set">
                        <StackPanel Orientation="Vertical" HorizontalAlignment="Center">
                            <svgc:SvgViewbox Source="/Icons/Var.svg" Width="48" Height="48" Margin="5"/>
                            <TextBlock Text="Variance" Style="{StaticResource SmallLabelStyle}"/>
                        </StackPanel>
                    </Button>

                    <!-- Peak to Peak Button -->
                    <Button x:Name="Button_PeakToPeak" 
                            Style="{StaticResource MeasurementButtonStyle}"
                            Click="MeasurementButton_Click"
                            Tag="PeakToPeak"
                            ToolTip="Peak-to-Peak value (Maximum - Minimum)">
                        <StackPanel Orientation="Vertical" HorizontalAlignment="Center">
                            <svgc:SvgViewbox Source="/Icons/PkPk.svg" Width="48" Height="48" Margin="5"/>
                            <TextBlock Text="Peak-Peak" Style="{StaticResource SmallLabelStyle}"/>
                        </StackPanel>
                    </Button>

                    <!-- FFT Button -->
                    <Button x:Name="Button_FFT" 
                            Style="{StaticResource MeasurementButtonStyle}"
                            Click="MeasurementButton_Click"
                            Tag="FFT"
                            ToolTip="Fast Fourier Transform - dominant frequency analysis">
                        <StackPanel Orientation="Vertical" HorizontalAlignment="Center">
                            <svgc:SvgViewbox Source="/Icons/FFT.svg" Width="48" Height="48" Margin="5"/>
                            <TextBlock Text="FFT" Style="{StaticResource SmallLabelStyle}"/>
                        </StackPanel>
                    </Button>

                </UniformGrid>
            </ScrollViewer>

            <!-- Bottom buttons -->
            <StackPanel Grid.Row="2" Orientation="Horizontal" HorizontalAlignment="Right" Margin="20,10,20,20"/>
        </Grid>
    </Border>
</Window>
