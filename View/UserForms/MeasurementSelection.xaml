<Window x:Class="SerialPlotDN_WPF.View.UserForms.MeasurementSelection"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:svgc="http://sharpvectors.codeplex.com/svgc/"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:local="clr-namespace:SerialPlotDN_WPF.View.UserForms"
        mc:Ignorable="d"
        Title="Measurement Selection" Height="350" Width="500" 
        WindowStyle="None"
        AllowsTransparency="True"
        ResizeMode="NoResize" 
        WindowStartupLocation="CenterScreen"
        Background="Transparent">
    <Window.Resources>
        <!-- Dark theme styles using global resources (same as StreamConfigWindow) -->
        <Style TargetType="Label">
            <Setter Property="Foreground" Value="{DynamicResource PlotSettings_LabelForegroundBrush}"/>
            <Setter Property="FontSize" Value="12"/>
        </Style>
        <Style TargetType="Button">
            <Setter Property="Background" Value="{DynamicResource PlotSettings_TextBoxBackgroundBrush}"/>
            <Setter Property="Foreground" Value="{DynamicResource PlotSettings_ButtonForegroundBrush}"/>
            <Setter Property="BorderBrush" Value="{DynamicResource PlotSettings_BorderBrush}"/>
            <Setter Property="BorderThickness" Value="1"/>
            <Setter Property="Padding" Value="10,5"/>
            <Setter Property="FontSize" Value="12"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border Background="{TemplateBinding Background}" 
                                BorderBrush="{TemplateBinding BorderBrush}" 
                                BorderThickness="{TemplateBinding BorderThickness}">
                            <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter Property="Background" Value="{DynamicResource PlotSettings_ButtonHoverBrush}"/>
                            </Trigger>
                            <Trigger Property="IsPressed" Value="True">
                                <Setter Property="Background" Value="{DynamicResource PlotSettings_ButtonPressedBrush}"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>
        <!-- Custom measurement button style with larger size -->
        <Style x:Key="MeasurementButtonStyle" TargetType="Button" BasedOn="{StaticResource {x:Type Button}}">
            <Setter Property="Width" Value="120"/>
            <Setter Property="Height" Value="80"/>
            <Setter Property="Margin" Value="10"/>
            <Setter Property="Padding" Value="5"/>
            <Setter Property="BorderThickness" Value="2"/>
        </Style>
        <!-- Custom close button style -->
        <Style x:Key="CloseButtonStyle" TargetType="Button">
            <Setter Property="Background" Value="Transparent"/>
            <Setter Property="Foreground" Value="{DynamicResource PlotSettings_CloseButtonForegroundBrush}"/>
            <Setter Property="BorderThickness" Value="0"/>
            <Setter Property="FontSize" Value="16"/>
            <Setter Property="FontWeight" Value="Bold"/>
            <Setter Property="Width" Value="30"/>
            <Setter Property="Height" Value="30"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border Background="{TemplateBinding Background}" 
                                BorderThickness="{TemplateBinding BorderThickness}">
                            <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter Property="Background" Value="{DynamicResource PlotSettings_CloseButtonHoverBrush}"/>
                            </Trigger>
                            <Trigger Property="IsPressed" Value="True">
                                <Setter Property="Background" Value="{DynamicResource PlotSettings_CloseButtonPressedBrush}"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>
    </Window.Resources>
    
    <!-- Main container with border and drop shadow -->
    <Border Background="{DynamicResource PlotSettings_BackgroundBrush}" 
            BorderBrush="{DynamicResource PlotSettings_BorderBrush}" 
            BorderThickness="1"
            CornerRadius="5">
        <Border.Effect>
            <DropShadowEffect Color="{DynamicResource PlotSettings_ShadowColor}" BlurRadius="10" ShadowDepth="3" Opacity="0.5"/>
        </Border.Effect>
        <Grid Margin="0">
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="*"/>
                <RowDefinition Height="Auto"/>
            </Grid.RowDefinitions>
            
            <!-- Custom title bar -->
            <Grid Grid.Row="0" Background="{DynamicResource PlotSettings_TitleBarBrush}" MouseLeftButtonDown="TitleBar_MouseLeftButtonDown">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>
                <TextBlock Grid.Column="0" Text="Select Measurement Type" 
                           Foreground="{DynamicResource PlotSettings_LabelForegroundBrush}" 
                           FontSize="14" FontWeight="SemiBold"
                           VerticalAlignment="Center" 
                           Margin="15,8"/>
                <!-- Close button -->
                <Button Grid.Column="1" 
                        Style="{StaticResource CloseButtonStyle}"
                        Content="✕" 
                        Click="CloseButton_Click"
                        ToolTip="Close"/>
            </Grid>

            <!-- Content Area - Grid of measurement buttons -->
            <ScrollViewer Grid.Row="1" VerticalScrollBarVisibility="Auto" Margin="20,10,20,20" Grid.RowSpan="2">
                <UniformGrid Columns="3" HorizontalAlignment="Center">
                    
                    <!-- Minimum Button -->
                    <Button x:Name="Button_Minimum" 
                            Style="{StaticResource MeasurementButtonStyle}"
                            Click="MeasurementButton_Click"
                            Tag="Minimum"
                            ToolTip="Minimum value in the data set">
                        <StackPanel Orientation="Vertical" HorizontalAlignment="Center">
                            <svgc:SvgViewbox Source="/Icons/min.svg" Width="32" Height="32" Margin="5"/>
                            <TextBlock Text="Minimum" FontSize="11" HorizontalAlignment="Center" 
                                      Foreground="{DynamicResource PlotSettings_LabelForegroundBrush}"/>
                        </StackPanel>
                    </Button>

                    <!-- Maximum Button -->
                    <Button x:Name="Button_Maximum" 
                            Style="{StaticResource MeasurementButtonStyle}"
                            Click="MeasurementButton_Click"
                            Tag="Maximum"
                            ToolTip="Maximum value in the data set">
                        <StackPanel Orientation="Vertical" HorizontalAlignment="Center">
                            <svgc:SvgViewbox Source="/Icons/max.svg" Width="32" Height="32" Margin="5"/>
                            <TextBlock Text="Maximum" FontSize="11" HorizontalAlignment="Center" 
                                      Foreground="{DynamicResource PlotSettings_LabelForegroundBrush}"/>
                        </StackPanel>
                    </Button>

                    <!-- Mean Button -->
                    <Button x:Name="Button_Mean" 
                            Style="{StaticResource MeasurementButtonStyle}"
                            Click="MeasurementButton_Click"
                            Tag="Mean"
                            ToolTip="Average (mean) value of the data set">
                        <StackPanel Orientation="Vertical" HorizontalAlignment="Center">
                            <svgc:SvgViewbox Source="/Icons/AVG.svg" Width="32" Height="32" Margin="5"/>
                            <TextBlock Text="Mean" FontSize="11" HorizontalAlignment="Center" 
                                      Foreground="{DynamicResource PlotSettings_LabelForegroundBrush}"/>
                        </StackPanel>
                    </Button>

                    <!-- RMS Button -->
                    <Button x:Name="Button_Rms" 
                            Style="{StaticResource MeasurementButtonStyle}"
                            Click="MeasurementButton_Click"
                            Tag="Rms"
                            ToolTip="Root Mean Square (RMS) value">
                        <StackPanel Orientation="Vertical" HorizontalAlignment="Center">
                            <svgc:SvgViewbox Source="/Icons/RMS.svg" Width="32" Height="32" Margin="5"/>
                            <TextBlock Text="RMS" FontSize="11" HorizontalAlignment="Center" 
                                      Foreground="{DynamicResource PlotSettings_LabelForegroundBrush}"/>
                        </StackPanel>
                    </Button>

                    <!-- Standard Deviation Button -->
                    <Button x:Name="Button_StandardDeviation" 
                            Style="{StaticResource MeasurementButtonStyle}"
                            Click="MeasurementButton_Click"
                            Tag="StandardDeviation"
                            ToolTip="Standard deviation of the data set">
                        <StackPanel Orientation="Vertical" HorizontalAlignment="Center">
                            <svgc:SvgViewbox Source="/Icons/StdDev.svg" Width="32" Height="32" Margin="5"/>
                            <TextBlock Text="Std Dev" FontSize="11" HorizontalAlignment="Center" 
                                      Foreground="{DynamicResource PlotSettings_LabelForegroundBrush}"/>
                        </StackPanel>
                    </Button>

                    <!-- Variance Button -->
                    <Button x:Name="Button_Variance" 
                            Style="{StaticResource MeasurementButtonStyle}"
                            Click="MeasurementButton_Click"
                            Tag="Variance"
                            ToolTip="Variance of the data set">
                        <StackPanel Orientation="Vertical" HorizontalAlignment="Center">
                            <svgc:SvgViewbox Source="/Icons/Var.svg" Width="32" Height="32" Margin="5"/>
                            <TextBlock Text="Variance" FontSize="11" HorizontalAlignment="Center" 
                                      Foreground="{DynamicResource PlotSettings_LabelForegroundBrush}"/>
                        </StackPanel>
                    </Button>

                    <!-- Peak to Peak Button -->
                    <Button x:Name="Button_PeakToPeak" 
                            Style="{StaticResource MeasurementButtonStyle}"
                            Click="MeasurementButton_Click"
                            Tag="PeakToPeak"
                            ToolTip="Peak-to-Peak value (Maximum - Minimum)">
                        <StackPanel Orientation="Vertical" HorizontalAlignment="Center">
                            <svgc:SvgViewbox Source="/Icons/PkPk.svg" Width="32" Height="32" Margin="5"/>
                            <TextBlock Text="Peak-Peak" FontSize="11" HorizontalAlignment="Center" 
                                      Foreground="{DynamicResource PlotSettings_LabelForegroundBrush}"/>
                        </StackPanel>
                    </Button>

                </UniformGrid>
            </ScrollViewer>

            <!-- Bottom buttons -->
            <StackPanel Grid.Row="2" Orientation="Horizontal" HorizontalAlignment="Right" Margin="20,10,20,20"/>
        </Grid>
    </Border>
</Window>
